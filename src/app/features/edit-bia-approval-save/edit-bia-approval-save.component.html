<div class="edit-bia-approval">
  <h2>Edit BIA Approval</h2>
  <p class="text-center" style="color: green;">{{ alert }}</p>

  <form [formGroup]="editBiaForm" (ngSubmit)="onSave()">
    <!-- Approval Name -->
    <div class="form-group">
      <label for="name">Approval Name</label>
      <input
        type="text"
        id="name"
        formControlName="name"
        class="form-control"
        placeholder="Enter Approval Name"
      />
    </div>

    <!-- Status and Author -->
    <div class="form-row">
      <div class="form-group half-width">
        <label for="status">Status</label>
        <select id="status" formControlName="status" class="form-control">
          <option value="" disabled>Select Status</option>
          <option value="Approved">Approved</option>
          <option value="Pending">Pending</option>
          <option value="Cancelled">Cancelled</option>
        </select>
      </div>
      <div class="form-group half-width">
        <label for="author">Author</label>
        <select id="author" formControlName="author" class="form-control">
          <option value="" disabled>Select Author</option>
          <option *ngFor="let author of authors" [value]="author">{{ author }}</option>
        </select>
      </div>
    </div>

    <!-- Reviewer and Agree -->
    <div class="form-row">
      <div class="form-group half-width">
        <label for="reviewer">Reviewer</label>
        <select id="reviewer" formControlName="reviewer" class="form-control">
          <option value="" disabled>Select Reviewer</option>
          <option *ngFor="let reviewer of reviewers" [value]="reviewer">{{ reviewer }}</option>
        </select>
      </div>
      <div class="form-group half-width">
        <label for="agree">Agree</label>
        <select id="agree" formControlName="agree" class="form-control">
          <option value="" disabled>Select</option>
          <option *ngFor="let option of agreeOptions" [value]="option">{{ option }}</option>
        </select>
      </div>
    </div>

    <!-- Last Review Date and Next Review Date -->
    <div class="form-row">
      <div class="form-group half-width">
        <label for="lastReviewDate">Last Review Date</label>
        <input
          type="date"
          id="lastReviewDate"
          formControlName="lastReviewDate"
          class="form-control"
        />
      </div>
      <div class="form-group half-width">
        <label for="nextReviewDate">Next Review Date</label>
        <input
          type="date"
          id="nextReviewDate"
          formControlName="nextReviewDate"
          class="form-control"
        />
      </div>
    </div>

    <!-- Reason for Cancellation -->
    <div class="form-group" *ngIf="editBiaForm.get('status')?.value === 'Cancelled'">
      <label for="reasonForCancellation">Reason for Cancellation</label>
      <textarea
        id="reasonForCancellation"
        formControlName="reasonForCancellation"
        class="form-control"
        placeholder="Enter Reason"
      ></textarea>
    </div>

    <!-- Action Buttons -->
    <div class="actions">
      <button type="submit" class="btn btn-primary" [disabled]="!editBiaForm.valid">
        Save Changes
      </button>
      <button type="button" class="btn btn-outline-danger" (click)="onCancel()">
        Cancel
      </button>
    </div>
  </form>

  <!-- Cancel Confirmation Popup -->
  <div *ngIf="showCancelPopup" class="popup-overlay">
    <div class="popup">
      <p>Do you want to cancel?</p>
      <button (click)="confirmCancel()" class="btn btn-danger">Confirm</button>
      <button (click)="dismissCancel()" class="btn btn-secondary">Dismiss</button>
    </div>
  </div>
</div>
